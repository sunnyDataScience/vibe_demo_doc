# 📦 模組1:會員登入系統(2.5小時)

## 🔍 第一性原理拆解

**核心知識點:身份驗證 (Authentication)**

```
最根本的問題:
「怎麼證明你是你?」

生活類比:
├─ 進公司刷門禁卡 → 卡片 = 身份證明
├─ 銀行提款輸入密碼 → 密碼 = 秘密資訊
└─ 手機指紋解鎖 → 生物特徵 = 唯一識別

軟體中的實現:
帳號 + 密碼 = 數位身份證明
```

**拆解成3個子問題:**
1. **註冊**:「怎麼讓新人加入?」
2. **登入**:「怎麼確認是本人?」
3. **保持狀態**:「怎麼讓他不用一直登入?」

---

## 📐 架構設計(用白話文)

**學生填寫架構設計表**

| 設計面向 | 學生需要思考的問題 | 範例答案 |
|---------|-------------------|---------|
| **輸入是什麼?** | 使用者要提供什麼資訊? | 帳號、密碼、(email) |
| **處理邏輯** | 系統要檢查什麼? | 1. 帳號是否已存在<br>2. 密碼是否符合規則<br>3. 密碼是否正確 |
| **輸出是什麼?** | 成功/失敗後顯示什麼? | 成功→進入系統<br>失敗→顯示錯誤訊息 |
| **資料存哪裡?** | 哪些資訊要存起來? | 帳號、加密後的密碼、註冊時間 |
| **安全性考量** | 有什麼風險?怎麼防? | 密碼不能明文存→要加密<br>避免暴力破解→錯太多次鎖帳號 |

**產出文件**:`模組1_架構設計文件.md`

---

## 💬 Vibe Prompt 設計

**教學生如何寫出好Prompt**

#### ❌ 不好的Prompt:
```
「幫我做會員登入」
```
**問題**:太模糊,AI不知道要做什麼

#### ✅ 好的Prompt(結構化範本):

```markdown
# 會員登入系統需求

## 背景說明
我正在做一個訂單管理系統,需要區分「客戶」和「管理員」兩種身份。

## 功能需求

### 註冊功能
**使用者角色**:新客戶
**流程**:
1. 填寫註冊表單(帳號、密碼、email、公司名稱)
2. 系統檢查帳號是否已被使用
3. 如果可用 → 建立帳號,寄送歡迎信
4. 如果已存在 → 顯示「帳號已被使用,請換一個」

**驗證規則**:
- 帳號:4-20字元,只能英文數字
- 密碼:至少8個字元,要有英文+數字
- Email:要符合email格式

### 登入功能
**使用者角色**:已註冊客戶
**流程**:
1. 輸入帳號密碼
2. 系統檢查資料庫
3. 如果正確 → 記住登入狀態,導向首頁
4. 如果錯誤 → 顯示「帳號或密碼錯誤」
5. 如果連錯3次 → 鎖定帳號30分鐘

### 登出功能
**流程**:
清除登入狀態,導回登入頁面

## 技術需求
- 資料庫:使用 Supabase
- 密碼處理:需要加密(不要明文存)
- 登入狀態:保持7天(除非主動登出)

## 介面需求
- 簡潔的登入畫面(不要太花俏)
- 錯誤訊息要清楚明確
- 手機版也要能用

請幫我生成這個會員系統的程式碼。
```

**學生練習:**
用這個範本,填寫自己的需求

**產出文件**:`模組1_開發Prompt.md`

---

## 🤖 AI協作開發(實作演練)

**Step 1:第一版實現(20分鐘)**

```
學生:把準備好的Prompt丟給AI(Claude/GPT)
AI:回傳程式碼
學生:複製到開發環境執行
```

**Step 2:測試驗證(10分鐘)**

**測試清單(學生逐一確認):**
- [ ] 能註冊新帳號
- [ ] 重複帳號會被擋下
- [ ] 能用註冊的帳號登入
- [ ] 錯誤密碼無法登入
- [ ] 登出後需要重新登入

**Step 3:發現問題,迭代改進(10分鐘)**

**如果測試失敗,教學生如何修正Prompt:**

```
學生:「註冊時系統沒有檢查密碼強度」
講師:「很好!你發現了問題。現在告訴AI:
       『我發現密碼沒有被檢查,請加上驗證:
        至少8個字元,要包含英文和數字』」
AI:回傳修正後的程式碼
```

**產出文件**:`模組1_測試報告.md`

---

## 📝 文件產出(文件驅動開發)

**每個模組都要產出的4份文件:**

#### 1️⃣ **架構設計文件**
```markdown
# 模組1:會員登入系統架構

## 系統目標
提供安全的身份驗證機制,區分客戶和管理員權限

## 核心功能
1. 註冊
2. 登入
3. 登出
4. 權限判定

## 資料結構
```sql
使用者表 (users)
├─ id (唯一識別碼)
├─ username (帳號)
├─ password_hash (加密後的密碼)
├─ email (信箱)
├─ role (角色:customer/admin)
└─ created_at (註冊時間)
```

## 流程圖
[插入流程圖]

## 安全機制
- 密碼使用bcrypt加密
- 登入狀態使用JWT Token
- 連續登入失敗鎖定機制
```

#### 2️⃣ **開發Prompt文件**
```markdown
# 模組1:給AI的開發指令

## Prompt 版本記錄
v1.0 (2025-01-01):初版
v1.1 (2025-01-02):新增密碼強度檢查
v1.2 (2025-01-03):修正登出邏輯

## 當前使用的Prompt
[完整的Prompt內容]

## AI回應分析
- 哪些部分AI理解正確
- 哪些需要額外說明
- 遇到的問題與解決方式
```

#### 3️⃣ **測試報告**
```markdown
# 模組1:測試報告

## 測試日期
2025-01-05

## 測試案例

| 編號 | 測試項目 | 輸入 | 預期結果 | 實際結果 | 狀態 |
|------|----------|------|----------|----------|------|
| T01 | 註冊新帳號 | user001/pass1234 | 註冊成功 | ✅成功 | PASS |
| T02 | 重複帳號 | user001/pass5678 | 顯示錯誤 | ✅顯示錯誤 | PASS |
| T03 | 弱密碼 | user002/123 | 拒絕註冊 | ⚠️允許註冊 | FAIL |

## 發現的問題
1. 密碼強度檢查未生效 → 已修正

## 待改進項目
- 加入email驗證機制
- 忘記密碼功能
```

#### 4️⃣ **擴展性備忘錄**
```markdown
# 模組1:未來可能的擴展

## 短期擴展(1個月內)
- 社群登入(Google/Facebook)
- 雙因素驗證(2FA)

## 中期擴展(3個月內)
- 多租戶支援(一個系統多家公司用)
- 細緻的權限管理(不只客戶/管理員)

## 長期擴展(6個月以上)
- SSO單一登入整合
- 生物辨識登入

## 設計時要注意
- 資料庫schema預留role_details欄位(JSON格式)
- API設計要支援多種驗證方式
```

---

## 🎯 可維護性思考引導

**在開發過程中,講師要不斷提問:**

| 維度 | 引導問題 | 期望學生思考的點 |
|------|---------|------------------|
| **模組化** | 「如果未來要改密碼規則,需要改幾個地方?」 | → 驗證邏輯應該集中在一個地方 |
| **擴展性** | 「如果未來要加Line登入,現在的架構好加嗎?」 | → 應該設計「登入方式」的抽象層 |
| **可讀性** | 「6個月後另一個人接手,他看得懂你的設計嗎?」 | → 文件的重要性 |
| **安全性** | 「如果駭客想攻擊,他會從哪裡下手?」 | → 輸入驗證、密碼存儲 |
