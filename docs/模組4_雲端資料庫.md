# üì¶ Ê®°ÁµÑ4:Èõ≤Á´ØË≥áÊñôÂ∫´ Supabase(2Â∞èÊôÇ)

## üîç Á¨¨‰∏ÄÊÄßÂéüÁêÜÊãÜËß£

**Ê†∏ÂøÉÁü•Ë≠òÈªû:Ë≥áÊñôÂª∫Ê®° (Data Modeling)**

```
ÊúÄÊ†πÊú¨ÁöÑÂïèÈ°å:
„ÄåÁèæÂØ¶‰∏ñÁïåÁöÑÊù±Ë•ø,ÊÄéÈ∫ºÂ≠òÈÄ≤ÈõªËÖ¶?„Äç

ÁîüÊ¥ªÈ°ûÊØî:
‚îú‚îÄ ÂúñÊõ∏È§®Êõ∏Êû∂:Êõ∏ÂàÜÈ°ûÊì∫Êîæ‚ÜíË≥áÊñôË°®ÂàÜÈ°û
‚îú‚îÄ Êõ∏ÁöÑÂÄüÈñ±Âç°:Ë®òÈåÑË™∞ÂÄü‰∫Ü‰ªÄÈ∫º‚ÜíÈóúËÅØË≥áÊñô
‚îî‚îÄ Êõ∏ÁõÆÁ¥¢Âºï:Âø´ÈÄüÊâæÊõ∏‚ÜíË≥áÊñôÂ∫´Á¥¢Âºï

ËªüÈ´î‰∏≠ÁöÑÂØ¶Áèæ:
ÂØ¶È´î(Entity) + Â±¨ÊÄß(Attribute) + Èóú‰øÇ(Relationship) = Ë≥áÊñôÊ®°Âûã
```

**ÊãÜËß£Êàê3ÂÄãÂ≠êÂïèÈ°å:**
1. **ÂØ¶È´îË≠òÂà•**:„ÄåÁ≥ªÁµ±Ë¶ÅÂ≠òÂì™‰∫õ„ÄéÊù±Ë•ø„Äè?„Äç
2. **Â±¨ÊÄßÂÆöÁæ©**:„ÄåÊØèÂÄã„ÄéÊù±Ë•ø„ÄèÊúâÂì™‰∫õÁâπÂæµ?„Äç
3. **Èóú‰øÇÂª∫Á´ã**:„Äå„ÄéÊù±Ë•ø„Äè‰πãÈñìÂ¶Ç‰ΩïÈÄ£Áµê?„Äç

---

## üìê Êû∂ÊßãË®≠Ë®à:ERÂúñ(ÂØ¶È´îÈóú‰øÇÂúñ)

**Áî®Ë¶ñË¶∫ÂåñÊñπÂºèÊïôÂ≠∏ÁîüË®≠Ë®àË≥áÊñôÂ∫´**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   ‰ΩøÁî®ËÄÖ     ‚îÇ         ‚îÇ    Ë®ÇÂñÆ      ‚îÇ         ‚îÇ    ÂïÜÂìÅ      ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ id (PK)      ‚îÇ1       ‚àû‚îÇ id (PK)      ‚îÇ        ‚àû‚îÇ id (PK)      ‚îÇ
‚îÇ username     ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ user_id (FK) ‚îÇ         ‚îÇ name         ‚îÇ
‚îÇ email        ‚îÇ  ‰∏ã     ‚îÇ order_date   ‚îÇ         ‚îÇ price        ‚îÇ
‚îÇ role         ‚îÇ         ‚îÇ status       ‚îÇ         ‚îÇ stock        ‚îÇ
‚îÇ created_at   ‚îÇ         ‚îÇ total_amount ‚îÇ         ‚îÇ category     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                ‚îÇ                        ‚îÇ
                                ‚îÇ                        ‚îÇ
                                ‚îÇ ‚àû                     1‚îÇ
                                ‚îÇ                        ‚îÇ
                         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
                         ‚îÇ  Ë®ÇÂñÆÊòéÁ¥∞     ‚îÇ              ‚îÇ
                         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§              ‚îÇ
                         ‚îÇ id (PK)       ‚îÇ              ‚îÇ
                         ‚îÇ order_id (FK) ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚îÇ product_id (FK)
                         ‚îÇ quantity      ‚îÇ
                         ‚îÇ price         ‚îÇ
                         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

Á¨¶ËôüË™™Êòé:
PK = Primary Key (‰∏ªÈçµ,ÂîØ‰∏ÄË≠òÂà•)
FK = Foreign Key (Â§ñÈçµ,ÈóúËÅØÂà∞ÂÖ∂‰ªñË°®)
1 = ‰∏ÄÂ∞ç‰∏Ä or ‰∏Ä
‚àû = ‰∏ÄÂ∞çÂ§ö or Â§ö
```

**Â≠∏ÁîüÁ∑¥Áøí:Áî®‰æøÂà©Ë≤ºË®≠Ë®àË≥áÊñôÂ∫´**

1. **Ê≠•È©ü1:ÊâæÂá∫ÂØ¶È´î(ÂêçË©û)**
   - ÊãøÂá∫‰æøÂà©Ë≤º,ÊØèÂºµÂØ´‰∏ÄÂÄã„ÄåÊù±Ë•ø„Äç
   - ‰æãÂ¶Ç:Ë®ÇÂñÆ„ÄÅÂïÜÂìÅ„ÄÅ‰ΩøÁî®ËÄÖ„ÄÅÈ°ûÂà•

2. **Ê≠•È©ü2:ÂÆöÁæ©Â±¨ÊÄß**
   - ÊØèÂÄãÂØ¶È´î‰∏ãÊñπÂàóÂá∫Â±¨ÊÄß
   - Ë®ÇÂñÆ:Á∑®Ëôü„ÄÅÊó•Êúü„ÄÅÈáëÈ°ç„ÄÅÁãÄÊÖã

3. **Ê≠•È©ü3:Áï´Âá∫Èóú‰øÇÁ∑ö**
   - Áî®Á∑öÈÄ£Êé•ÊúâÈóú‰øÇÁöÑÂØ¶È´î
   - ‰∏ÄÂÄã‰ΩøÁî®ËÄÖÊúâÂ§öÂÄãË®ÇÂñÆ ‚Üí Áï´Á∑ö,Ê®ôË®ª„Äå1Â∞çÂ§ö„Äç

**Áî¢Âá∫Êñá‰ª∂**:`Ê®°ÁµÑ4_Ë≥áÊñôË°®Ë®≠Ë®à.md`

---

## üí¨ Áµ¶SupabaseÁöÑÂª∫Ë°®Prompt

```markdown
# SupabaseË≥áÊñôÂ∫´ÁµêÊßãË®≠Ë®à

ÊàëÈúÄË¶ÅÁÇ∫Ë®ÇÂñÆÁÆ°ÁêÜÁ≥ªÁµ±Âª∫Á´ãË≥áÊñôÂ∫´,Ë´ãÂπ´ÊàëÁî¢ÁîüSupabaseÁöÑSQLÂª∫Ë°®Ë™ûÊ≥ï„ÄÇ

## Ë°®1:‰ΩøÁî®ËÄÖË°® (users)

**Ê¨Ñ‰Ωç:**
- id:UUID,‰∏ªÈçµ,Ëá™ÂãïÁî¢Áîü
- username:ÊñáÂ≠ó,ÂîØ‰∏Ä,‰∏çËÉΩÁÇ∫Á©∫
- email:ÊñáÂ≠ó,ÂîØ‰∏Ä,‰∏çËÉΩÁÇ∫Á©∫
- password_hash:ÊñáÂ≠ó,‰∏çËÉΩÁÇ∫Á©∫
- role:ÊñáÂ≠ó,È†êË®≠ÂÄº'customer',ÂèØÈÅ∏ÂÄº(customer/admin/super_admin)
- created_at:ÊôÇÈñìÊà≥Ë®ò,È†êË®≠Áï∂ÂâçÊôÇÈñì

**Á¥¢Âºï:**
- username(Âä†Âø´Êü•Ë©¢)
- email(Âä†Âø´Êü•Ë©¢)

## Ë°®2:ÂïÜÂìÅË°® (products)

**Ê¨Ñ‰Ωç:**
- id:UUID,‰∏ªÈçµ
- name:ÊñáÂ≠ó,‰∏çËÉΩÁÇ∫Á©∫
- description:ÊñáÂ≠ó,ÂèØÁÇ∫Á©∫
- price:Êï∏Â≠ó(Â∞èÊï∏Èªû2‰Ωç)
- stock:Êï¥Êï∏,È†êË®≠0
- category:ÊñáÂ≠ó
- is_active:Â∏ÉÊûóÂÄº,È†êË®≠true(ÊòØÂê¶‰∏äÊû∂)
- created_at:ÊôÇÈñìÊà≥Ë®ò

## Ë°®3:Ë®ÇÂñÆË°® (orders)

**Ê¨Ñ‰Ωç:**
- id:UUID,‰∏ªÈçµ
- order_number:ÊñáÂ≠ó,ÂîØ‰∏Ä(Ê†ºÂºè:ORD-20250101-001)
- user_id:UUID,Â§ñÈçµÈÄ£Êé•users.id
- order_date:ÊôÇÈñìÊà≥Ë®ò,È†êË®≠Áï∂ÂâçÊôÇÈñì
- status:ÊñáÂ≠ó,È†êË®≠'pending',ÂèØÈÅ∏ÂÄº(pending/processing/shipped/completed/cancelled)
- total_amount:Êï∏Â≠ó(Â∞èÊï∏Èªû2‰Ωç)
- delivery_address:ÊñáÂ≠ó
- notes:ÊñáÂ≠ó,ÂèØÁÇ∫Á©∫

**Â§ñÈçµÁ¥ÑÊùü:**
- user_id ‚Üí users.id(Âà™Èô§‰ΩøÁî®ËÄÖÊôÇË®ÇÂñÆË®≠ÁÇ∫NULL)

## Ë°®4:Ë®ÇÂñÆÊòéÁ¥∞Ë°® (order_items)

**Ê¨Ñ‰Ωç:**
- id:UUID,‰∏ªÈçµ
- order_id:UUID,Â§ñÈçµÈÄ£Êé•orders.id
- product_id:UUID,Â§ñÈçµÈÄ£Êé•products.id
- quantity:Êï¥Êï∏,‰∏çËÉΩÁÇ∫Á©∫
- unit_price:Êï∏Â≠ó(Â∞èÊï∏Èªû2‰Ωç)
- subtotal:Êï∏Â≠ó(Â∞èÊï∏Èªû2‰Ωç)

**Â§ñÈçµÁ¥ÑÊùü:**
- order_id ‚Üí orders.id(Âà™Èô§Ë®ÇÂñÆÊôÇ‰∏ÄËµ∑Âà™Èô§ÊòéÁ¥∞)
- product_id ‚Üí products.id(Âà™Èô§ÂïÜÂìÅÊôÇÊòéÁ¥∞‰øùÁïô‰ΩÜÊ®ôË®ò)

Ë´ãÁî¢ÁîüÂª∫Á´ãÈÄô‰∫õË°®ÁöÑSQLË™ûÊ≥ï,‰∏¶Âä†‰∏äÈÅ©Áï∂ÁöÑË®ªËß£„ÄÇ
```

**Â≠∏ÁîüÁ∑¥Áøí:**
ÊääÁîüÊàêÁöÑSQLË≤ºÂà∞SupabaseÂü∑Ë°å,Á¢∫Ë™çË°®Âª∫Á´ãÊàêÂäü

**Áî¢Âá∫Êñá‰ª∂**:`Ê®°ÁµÑ4_Âª∫Ë°®SQL.sql` + `Ê®°ÁµÑ4_Ë≥áÊñôÂ≠óÂÖ∏.md`

---

## üéØ ÂèØÁ∂≠Ë≠∑ÊÄßÈáçÈªû:Ë≥áÊñôÂÆåÊï¥ÊÄß

**ÊïôÂ≠∏Áîü„ÄåË≥áÊñôÂ∫´Ë®≠Ë®àË¶ÅÈò≤Ê≠¢ÈåØË™§Ë≥áÊñô„Äç**

| Ë®≠Ë®àÂéüÂâá | ÁØÑ‰æã | Áî®ÁôΩË©±ÊñáÂëäË®¥AI |
|---------|------|---------------|
| **ÈùûÁ©∫Á¥ÑÊùü** | email‰∏çËÉΩÊòØÁ©∫ÁöÑ | „ÄåemailÊ¨Ñ‰ΩçË®≠ÁÇ∫NOT NULL„Äç |
| **ÂîØ‰∏ÄÁ¥ÑÊùü** | Â∏≥Ëôü‰∏çËÉΩÈáçË§á | „ÄåusernameË¶ÅÊúâUNIQUEÁ¥ÑÊùü„Äç |
| **È†êË®≠ÂÄº** | Ë®ÇÂñÆÁãÄÊÖãÈ†êË®≠„ÄåÂæÖËôïÁêÜ„Äç | „ÄåstatusÊ¨Ñ‰ΩçÈ†êË®≠ÂÄº'pending'„Äç |
| **Â§ñÈçµÁ¥ÑÊùü** | Ë®ÇÂñÆË¶ÅÂ∞çÊáâÂà∞ÁúüÂØ¶‰ΩøÁî®ËÄÖ | „Äåuser_idË¶ÅÈÄ£Âà∞usersË°®ÁöÑid„Äç |
| **Ê™¢Êü•Á¥ÑÊùü** | Êï∏Èáè‰∏çËÉΩÊòØË≤†Êï∏ | „ÄåquantityÊ¨Ñ‰ΩçÂä†CHECKÁ¥ÑÊùü >= 0„Äç |
